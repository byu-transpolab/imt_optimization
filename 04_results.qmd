# Results

```{r setup, file = "R/chapter_start.R", include = FALSE}
# a number of commands need to run at the beginning of each chapter. This
# includes loading libraries that I always use, as well as options for 
# displaying numbers and text.
```

```{r setup2, include = FALSE}
# Other packages ------
# These are packages that get used in this chapter but aren't part of the default set.
library(mlogit)
```

This section might be called "Results" instead of "Applications," depending on what it is that you are working on. But you'll probably say something like "The initial model estimation results are given in @tbl-estimationresults" That table is created with the `modelsummary()` package and function.

## Scenario Results from MATSim Simulations

The study utilized the MATSim model to conduct 20 simulations across three differentiated scenarios: "Incidents", "Current", and "Increased". Within the "Incidents" scenario, a random subset of incidents was produced without any subsequent intervention from incident management teams (IMTs). The "Current" scenario included incidents paired with responsive measures from UDOT's existing fleet of 20 IMT vehicles. The "Increased" scenario is analogous to the "Current" framework, yet it alters the model with an additional grouping of 10 IMT vehicles, culminating in a fleet of 30 vehicles.

These distinct scenarios were compared internally as well as against a "Baseline" scenario devoid of any incidents or IMT presence. Cumulatively, 61 simulation scenarios were executed, each subjected to 450 MATSim iterations. This iterative approach ensured that a majority of scenarios gravitated towards a state where travel plans displayed minimal variance between successive iterations, effectively achieving an equilibrium in travel behavior and cumulative vehicle hours traveled by the simulation's conclusion.

Subsequent sections of this chapter are dedicated to analyzing the output results from these scenarios, emphasizing comparative metrics such as vehicle hours of delay (VHD), the ramifications of incidents, and the IMT response dynamics pertaining to these incidents.

## Vehicle Hours of Delay

One of the principal metrics utilized to analyze the simulation scenarios is the Total Vehicle Hours of Delay (VHD). The analysis of vehicle hours of delay was divided into three tiers of investigation. Firstly, the overarching network (termed "All Links"). Secondly, the links MATSim categorizes as motorway links --- often referred to as freeway links. Lastly, the specific links where incidents occur, in addition to the two immediate upstream links. This cluster of links is labeled "Impact Links" for the purposes of this study.

Overall, it is apparent that the IMT vehicles' influence within the simulations is most relevant at the "Impact Link" level. However, their effects permeate every tier of analysis. While the outcomes of certain scenarios align with anticipated projections, others deviate from intuitive or foreseen results. The subsequent analysis will commence with an exploration of the "All Links" scenarios.

### Network Hours of Delay

Each scenario, with the exception of the baseline, encompasses ten distinct sub-scenarios. The table, titled 'Average VHD', indicates the mean hours of delay for each scenario cluster. Additionally, it includes a comparative metric, showcasing the percentage deviation in VHD from the baseline scenario.

Within the array of scenario groupings, those equipped with an IMT fleet of 30 vehicles exhibited the most effective results, on average. Following closely were the scenarios reliant on the current fleet, and, as anticipated, the incident-only scenarios registered the maximal Total VHD values. An intriguing observation arises when evaluating the VHD in the context of incident frequency: the patterns do not align with conventional expectations. For instance, in the incident-only scenarios, the average total VHD for scenarios incorporating increased incidents escalated by approximately one percent compared to the scenarios representing the current incident frequency. Yet, when evaluating scenarios associated with both the existing and increased IMT fleet sizes, the distinction between the current and increased incident frequencies was notably marginal.


\<\< TO DO: try to explain why it is that there is so little difference between the current and increased incident frequency groupings. Can it be attributed to the incidents that were selected? Is that something that you can discover when looking into the impacted links VHD? \>\>

```{r truck_data}
tar_load(delay_table)
```

```{r truck_data}
#| label: fig-network_delays_table
#| fig-cap: average VHD for scenario groups
tar_load(all_links_comparison_table)
all_links_comparison_table
```

Given that the table reveals average delay values aggregated across multiple scenarios within each grouping, a graphical representation can offer enhanced clarity regarding the inherent variance within these data clusters. The ensuing figure illustrates the this data through various violin plots.

```{r truck_data}
#| label: fig-network_violin_plot
#| fig-cap: VHD for scenario groups in violins.
tar_load(all_links_plot)
all_links_plot
```

Within this visualization, each violin illustrates the density distribution of delay values. The increased width in certain sections of the violin signifies regions where a number of simulations converged around a specific delay value. Conversely, the narrow sections denote fewer simulations converging around that delay metric. To further contextualize each scenario, a dashed horizontal line has been superimposed, signifying the Baseline scenario, serving as a reference point for comparison. Additionally, the diamond markers situated within each plot symbolize the mean delay for all simulations in the respective scenario.

Upon inspection of these violins, several observations can be made. For instance, in the "Incidents" scenario, the delay distribution is characterized by a relatively constricted spread at the lower end, fanning out around the 100,000 mark, with the mean delay skewing closer to 104,000, influenced by the values approaching 120,000 total hours of delay. The distribution within the "Current" scenario exhibits significant variability, reflected in its consistent width. The scenario with the "Increased" IMT fleet manifests marginally reduced variability in comparison to the "Current" scenario, and contains pronounced sections around 90,000 VHD and 100,000 VHD.

```{r truck_data}
tar_load(truck_data)
```

```{r truck_data}
#| label: fig-truckplots
#| fig-cap: Average truck travel time.
tar_load(truck_plots)
truck_plots
```

```{r estimation}
tar_load(models)
```

```{r estimation-results}
#| label: tbl-estimationresults
#| tbl-cap: Model Summary Results
modelsummary(models, estimate = "{estimate} ({statistic})")
```

Sometimes, it is nice to put the models or your other results into a figure instead of a table. Have a look at @fig-modelplot. Note that your figures might look better in pdf if you use the `tikz` rendering device.

```{r modelplot}
#| label: fig-modelplot
#| fig-cap: Estimated model coefficients and confidence intervals.
#| 
modelplot(models) +
  xlab("Coefficient estimates")
```

With those results presented, you can go into a discussion of what they mean. first, discuss the actual results that are shown in the table, and then any interesting or unintuitive observations.

## Additional Analysis

Usually, it is good to use your model for something.

-   Hypothetical policy analysis
-   Statistical validation effort
-   Equity or impact analysis

If the analysis is substantial, it might become its own top-level section.

# Truck Travel

## Incident Impact

Initiating the results section, we will compare the baseline scenario against the incident-only scenarios. Subsections will likely delve into parameters such as the average incident duration and capacity reductions under both the current incident frequency and its increased counterpart. Potential subdivisions might explore, for instance, average delay on incident links---either stratified into time segments or evaluated throughout the simulated day. Following this, an examination of the average delay across all motorway links will unravel, spotlighting the variations in VHD (vehicle hours of delay) between the baseline, current, and increased incident scenarios. The next discussion might broach the total vehicle hours traveled, contrasting these figures. While it could be tempting to attribute any disparities in delay solely to incidents, the pronounced divergence between baseline and incident scenarios suggests external factors may have a role, meriting exploration in subsequent IMT impact sections.

### Incdient and Feeder Links

For a tangible grasp, selecting an exemplar incident link could be beneficial, perhaps comparing delay in the baseline with delay subsequent to a capacity-reducing network change event, possibly illustrated via a table format. This will segue into an evaluation of average delays on directly impacted links and their preceding feeder links. Adopting an illustrative approach, one might assert, "Given that the average incident duration stands at 'X', the subsequent table delineates delays on the incident link up to a time frame of 'X+1', with 'X+1' exemplifying a duration like '2hrs + 30mins'."

### Motorway Links

Incidents only occur on motorway (freeway links) so when we look at those comprehensively how do they compare to one another (comparing the baseline to the incidents only)

### Total VHD

What were the total travel times and total vehicle hours of delay?

## IMT Impact

Initiating this segment of the results section, our focus will shift towards understanding the impacts of the IMT scenarios. In particular, we will compare the outcomes of the current IMT fleet, comprising 20 vehicles, against a hypothetical expanded fleet, which would encompass the original 20 vehicles along with an added 10. Subsections will delve into various aspects of these scenarios.

Primary areas of exploration include examining parameters such as average incident duration and the ensuing capacity reductions under both the prevailing incident frequency and its amplified variant. More granular analyses might probe into the average delay on incident links, offering insights either categorized into discrete time segments or spread across the simulated day. Subsequent to this, our attention will turn to dissecting the average delay observed across all motorway links, thereby illuminating the differential in VHD (vehicle hours of delay) when considering the baseline, the status quo of the IMT fleet, and the proposed expanded fleet scenarios.

As we transition to a discussion on the cumulative vehicle hours traveled, we will aim to contrast these metrics across the scenarios. It would be an oversimplification to ascribe variations in delay exclusively to the presence or absence of incidents. The evident distinctions between scenarios, especially those with the IMT interventions, hint at the intricate interplay of various factors, setting the stage for a deeper dive in the upcoming IMT impact sections.

### IMT Arrival Times

This section elucidates the disparity in average response durations required for each IMT to reach the incident sites, contingent upon the scenario under consideration. The analysis zeroes in on contrasting the response durations of our extant IMT fleet, comprising 20 vehicles, with a proposed augmented fleet with an additional 10 IMT vehicles. This discourse aptly paves the way for the ensuing section, detailing how delays on incident links and their feeder counterparts are contingent upon IMT vehicle presence. A revisitation or citation of the methodology might enhance comprehension, especially regarding distinctions between the "incidents only" scenario and its "IMT current" and "IMT improved" counterparts.

### Incident and Feeder Links

Similar to the motorway links discussion in the Incident Impact section. It might be worth it to have an example that highlights the delays during the time interval before the IMT arrives and the delay after they arrive, then once again of course, compare the average delays on incident links and feeder links up until a certain time after the incident ends and the link returns to its full capacity.

## #Motorway Links

### Total VHD

## Limitations
