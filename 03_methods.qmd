# Methodology

This section outlines the methods used for the Utah Incident Management Team Optimization project model, building upon the main concepts discussed in sections 2.1 and 2.2 of the literature review. The primary goal of the model is to demonstrate the impact of traffic incidents on overall traffic flow and assess the effectiveness of Incident Management Teams (IMTs) within a simulated environment.

Our methodology is structured around three main components: setting up IMT Vehicles and Incidents, understanding the functionality of the MATSim model, and establishing scenarios for comparative analysis. In the "IMT Vehicle Configuration and Incident Selection" section, we define the origins of variables such as the size of the IMT fleet, their initial placements, operational schedules, and specific details of incidents, including location, severity, and frequency. These factors are pivotal as they can significantly influence the network's performance metrics. Following this, in the section on "MATSim Model's Functionality," we detail how these variables are integrated and represented within the MATSim framework more closely align with real-world conditions, building upon the foundational work of @kaddoura2018.

Lastly, "Scenario Simulations and Comparisons" presents the range of simulated scenarios used for comparison purposes. This section also outlines the inputs for each scenario including the network, plans, and configurations files used and their origins. The section explains the comparative measures to be used in comparing scenarios against one another which occurs in the results section of the report.

In the final subsection, "Scenario Simulations and Comparisons," we describe the assortment of scenarios that were simulated and the rationale behind their selection. This part of the document describes the specific inputs for each scenario, including the network, plans, and configuration files, as well as their origins. Additionally, it details the comparative measures employed to evaluate the scenarios against one another, with a detailed analysis presented in the results section of the report.

## IMT Vehicle Configuration and Incident Selection

The strategic placement and sizing of IMT fleets are pivotal in optimizing vehicle response times, a relationship explored in depth by @lou2011 and @pal2002. Furthermore, @schultz2019 established a significant link between response time (RT) and roadway clearance time (RCT). In the 'IMT Vehicle Setup' subsection, we describe the organization of the IMT vehicle, taking these relationships into account and adhering to recommendations from Utah Highway Patrol officials specific to this project.

Additionally, the nature and severity of incidents play a significant role in affecting average travel times and delays, as evidenced by the research of @kaddoura2018. The 'Incident Data' and 'Incident Sampling' subsections elaborate on our methodology for selecting incidents for the simulation scenarios, utilizing data from concurrent research efforts.

### IMT Vehicle Setup

The Utah Department of Transportation currently operates a fleet of 20 IMT vehicles, distributed across three zones corresponding to the counties of Davis, Salt Lake, and Utah within the Wasatch Front. @fig-IMT_Map visually represents the boundaries of each county and the initial locations of both existing and newly proposed IMT vehicles used in out simulated scenarios.

![IMT Starting Locations.](figures/imt_map.png){#fig-IMT_Map}

In this figure, circles represent existing vehicles, while stars denote proposed additions. These starting locations aim to ensure a balanced distribution across each county, based on shift types---either day or afternoon. While this arrangement does not replicate the real-world starting points of IMT truck drivers, who typically commence their shifts from their homes, it is a pragmatic approach. Given that the majority of their operations are concentrated along major interstates such as I-15, I-80, and I-215, and considering the daily variability in starting locations, positioning them along these primary routes is logical for our MATSim Scenario simulations. Notably, the "Increased-IMT" scenario incorporates all vehicles from the "Existing" fleet, supplemented by an additional 10 vehicles distributed across the three counties.

Our investigation primarily focuses on analyzing the potential impacts of augmenting the IMT fleet, rather than the influence of their starting locations. We hypothesize that an increase in vehicle numbers, assuming an equitable distribution, could enhance IMT effectiveness.

Additionally, vehicle scheduling is a critical aspect of our setup. All three counties operate IMT vehicles across day and afternoon shifts, with specific timeframes detailed in the trucks file for MATSim scenario runs. Although IMT vehicles typically do not cross county borders during operations, our MATSim network does not impose such constraints, allowing for vehicle movement across counties based on incident proximity. With these vehicle configurations established, we now turn our attention to the incident data the sampling used in establishing simulated scenarios.

### Incident Data

Joel Hyer, a student at Brigham Young University, conducted concurrent research to acquire a dataset of incidents having received Utah Incident Management Team (IMT) intervention, sourcing data from TransSuite and the Utah Highway Patrol. He ensured that each incident record in the dataset was complete, providing essential details such as start and end times (with the latter derived from the Roadway Clearance Time (RCT)), location, and the degree of capacity reduction.

From the data collected in 2018 and 2022, Joel compiled a comprehensive list of 411 unique incidents, ranging in severity from property damage to fatal accidents. This dataset served as the foundation for selecting incidents to include in the MATSim model. However, it is important to note that this list does not represent the total number of incidents responded to by UHP and IMT services. The 'master list' contains all incidents responded to by the Utah Highway Patrol and provides a more accurate depiction of daily incidents. Even still, it is important to acknowledge that both data sets only include incidents that received a response from UHP or IMT services, omitting those that did not.

### Incident Sampling

To accurately model the daily frequency of incidents, we conducted a thorough analysis of the 'master list' of incident data, from which we derived a distribution of incident count frequencies to inform our sampling methodology.

We employed the Pandas library in Python to create a script that imports the data into a data frame, eliminates any duplicate entries, and refines the 'Call Received Time' and 'Call Type' columns. We then aggregated the data by date and call type, counted the incidents, and generated a new data frame that details the daily frequency of incidents. These frequencies served as the foundation for creating a weighted distribution, which in turn facilitated our sampling process. To ensure consistency and replicability of our results, we integrated a fixed random seed value into our script. This setup allowed us to perform random sampling, extracting ten days from the incident number distribution based on the established frequencies. These ten values were then utilized to simulate ten scenarios based on observed or current incident frequencies.

Utilizing the incident data, we established a total of 20 scenarios, categorized into two distinct groups: Current Incident Frequencies and Increased Incident Frequencies. For the scenarios under Current Incident Frequencies, we employed the script described above to select ten days from a weighted sampling distribution, which determined the number of incidents to be simulated for each respective day. On the other hand, the scenarios categorized as Increased Incident Frequencies were designed to evaluate the resilience and performance of the IMT system when confronted with a substantial increase in daily incidents. Drawing from the upper range of the 2022 data, we identified days with incident counts varying from 18 to 21. To ensure a thorough and comprehensive evaluation, we decided to simulate additional days for each incident count, resulting in a distribution of two days with 21 incidents, two days with 20 incidents, three days with 19 incidents, and three days with 18 incidents. @fig-Inc_Map visually represents the original distribution of daily incidents, as well as the distributions for both current and increased incident frequencies used in assigning the number of incidents to each simulation scenario.

![Figure 5: Incident Sampling.](figures/inc_sampling.png){#fig-Inc_Map} 

Upon determining the distribution of incidents for each scenario, we assigned a three-digit seed value to each of the twenty scenario groupings, serving both as an identifier and a tool for incident selection. Within MATSim, each scenario received a specified number of incidents and a seed value. Utilizing these parameters, a number of incidents 'X' was randomly selected from the list of 411 incidents, ensuring that the same incident did not occur more than once within a single simulation. For future research, additional parameters could be established for incident selection to ensure the creation of logical and realistic incident scenarios.

## MATSim Functionality

In the MATSim model, factors such as incident selection are programmed within the model. The distribution and scheduling of trucks are described in XML truck files, which are then loaded into the model. As highlighted in the literature review, MATSim is an open-source platform that consists of various modules and packages. These components can be created, imported, and edited by users across the platform, fostering a collaborative environment.

For the purposes of our research, we developed the ImtModule, a specialized package designed to process incidents and IMT responses within the simulation. This module leverages existing research on incident simulation, Demand Rapid Transit (DRT), event handling, and vehicle dispatch algorithms, building upon these foundations to enhance the functionality of our model.

In this section, we delve into some of the specific tools within MATSim that we utilized and adapted to construct a comprehensive and functional model for both processing and analysis. These tools include Network Change Events, Vehicle Assignment, and Incident Response. Together, they contribute to the realism and precision of our traffic simulations, particularly in the context of responding to roadway incidents, ensuring that our model provides accurate and reliable results.

### Network Change Events

In a MATSim network, each link is characterized by specific attributes such as type, length, number of lanes, free-flow speed, and capacity. To effectively simulate unexpected events and their subsequent impacts on traffic flow, it is essential to dynamically adjust these attributes. This capability, termed a Time-Dependent Network, is elaborated upon in the MATSim textbook and is vital for ensuring the realism and accuracy of our simulation.

Network Change Events (NCEs) serve as the mechanism within MATSim for modifying network attributes at precise moments during a simulation. Detailed in Section 6.1 of the MATSim textbook, the implementation of NCEs necessitates specific adjustments to the MATSim configuration file to facilitate a time-variant network. These events can modify a link's free-flow speed, number of lanes, or capacity. To initiate a network change event, the system requires specific information including the time of the event (startTime), the affected link(s) (link refID), the type of change (free-flow speed, lanes, or capacity), and the value of the change.

Implementing network change events for incidents in our simulation is relatively straightforward. Each incident is specified with a start time, link ID, and capacity reduction factor. However, triggering network change events upon the arrival of an IMT vehicle is a more complex task. As outlined in the 'Vehicle Assignment' section, IMT vehicles are dispatched similarly to taxis or ambulances, building upon the existing framework of Demand Rapid Transit (DRT) described in the MATSim textbook. In line with their assignment algorithm, IMT vehicles receive a request and proceed to the location of the affected link. Their arrival times are variable and depend on the current traffic conditions.

To manage this uncertainty, we employ an 'event-handler', a tool that records the events of a simulation as it progresses. These events provide insights into when specific vehicles enter and exit links en route to their destinations. For IMT vehicles, event handlers were utilized to monitor their arrival at incident links, triggering specific network change events. In this study, every time an IMT vehicle reached an impacted link, it restored 25% of the link's lost capacity.

This approach ensures a dynamic and responsive simulation, reflecting the real-world scenarios where IMT vehicles play a crucial role in mitigating the impacts of roadway incidents. The implementation of the MATSim within-day replanning module further enhances this responsiveness, enabling the rerouting of other agents on the road in the aftermath of an incident.

Contrary to the work of @kaddoura2018, our study does not take into account long-term capacity reduction events such as road construction, focusing exclusively on short-term incidents like accidents or vehicle breakdowns. The reduced capacity of a specific link generally impacts all agents, both regular and IMT vehicles. However, if a subnetwork is employed, IMT trucks, akin to other emergency vehicles such as ambulances and firetrucks, experience less disruption from congestion caused by daily traffic or unexpected incidents.

### Within-Day Replanning

\<\< The model was meant to incorporates the concept of within-day replanning to a certain extent, as elaborated in Chapter 30 of the MATSim textbook. I loaded the within-day replanning module but didn't specify which agents needed to use it or the times that they needed to use it. \>\>

\<\< Dr. Macfarlane. Within-day replanning is not being implemented in the way that I thought that it was. After re-reading the literature review I realized that I had confused the replanning that occurs from iteration to iteration with the replanning mentioned by @kaddoura2018 that only occurs for specific agents within the simulation. \>\>

\<\< I do think it is still worth mentioning their research, and I can discuss how we could have used within-day replanning more effectively in the limitations section of this report. I am sorry for the confusion and for not realizing the problem earlier. Perhaps this section in the Methodology could discuss the strategy the model uses from iteration to iteration. \>\>

\<\< I'll likely move this section to the limitations and talk about it, but wanted to leave you a note here just in case you were looking for this section - Daniel Jarvis\>\>

### Vehicle Assignment

In the MATSim simulation, the dispatch of one or more Incident Management Team (IMT) vehicles is triggered when an incident occurs. The selection of the most appropriate IMT vehicle for the task is determined by a dispatch algorithm. This algorithm may base its decision on either a least-cost path calculation, which takes into account factors such as congestion and link speed, or it may opt for the shortest path between the vehicle's current location and the incident site. The effectiveness of these methods is contingent upon the IMT units' ability to navigate through traffic. In scenarios where a subnetwork is employed, IMT trucks, like other emergency vehicles, are less impacted by congestion and variations in free-flow speed. This could render the shortest path calculation a more viable option. On the other hand, if IMT vehicles are subject to the same traffic conditions as regular vehicles, a least-cost path calculation might be the more prudent choice within the simulation.

In this project, the Utah IMT system operates collaboratively with the Utah Highway Patrol, sharing a common dispatch service. IMT vehicles, equipped with sirens and flashing lights similar to those on highway patrol vehicles, are assigned to specific zones and have the capability to navigate through traffic like other emergency vehicles. Given this capability, the dispatch system prioritizes the IMT vehicle that can reach the incident site most efficiently, taking into account the current traffic conditions. This operational protocol ensures that, within the simulated scenarios, the IMT vehicle selected is not merely the closest in terms of distance, but also the most strategically positioned to respond swiftly and effectively.

Upon arrival at an incident site, IMT vehicles play a crucial role, primarily through their interaction with Network Change Events (NCEs) within the ongoing simulation. They utilize the same mechanisms as incidents to effect changes in the network, contributing to the dynamic and responsive nature of the simulation. This ensures that the simulation remains a valuable tool for understanding and planning for real-world scenarios, particularly those involving roadway incidents and the subsequent deployment of IMT vehicles.

It is important to note that resource limitations may sometimes restrict the number of IMT units available to respond to an incident. In instances where an incident would ideally be managed by 2 or 3 IMT units, only a single vehicle might be dispatched, potentially leading to extended management or cleanup times. This limitation, along with its implications, will be discussed in more detail in the conclusion and limitations section of this report.

### Incident Response

Network Change Events (NCEs) play a crucial role in the MATSim network, simulating the effects of incidents on agents and demonstrating how these events impact user behavior. Additionally, NCEs highlight the influence of Incident Management Teams (IMTs) on agents' travel times and paths, providing a comprehensive view of incident response.

Upon the occurrence of an incident, the vehicle assignment algorithm is tasked with dispatching IMT units, leading to a critical decision: what impact will the IMT vehicles have on the affected links? Two primary strategies are considered:

1.  Incident Duration Reduction: The IMT vehicles can decrease the duration for which the link's capacity is reduced, effectively shortening the incident's length.
2.  Capacity Restoration: Upon their arrival, IMT vehicles can restore a certain percentage of the link's lost capacity.

The decision between these strategies is dependent on the data available to the user. In the context of this project there is a lack of comprehensive data comparing incidents with and without IMT or highway patrol intervention. This data gap, highlighted in our literature review, prevents an accurate prediction of an incident's potential duration without external assistance and hinders informed decision-making in incident management.

In the absence of clear comparative data, the practicality of the first option---incident duration reduction---remains uncertain. However, this study has adopted the second strategy, capacity restoration, with IMT vehicles restoring 25% of the capacity gap on an incident link upon their arrival. This capacity gap is defined as the difference between a link's full capacity and its reduced capacity during an incident.

@fig-Cap_Restore visually represents the potential impact of an incident without IMT intervention, contrasting it with scenarios involving the response of one or two IMT units. This illustration underscores the significance of IMT vehicles in incident management and their potential to mitigate the effects of incidents on network traffic flow.

![Figure 4: IMT Capacity Restoration Upon Arrival.](figures/cap_restore.png){#fig-Cap_Restore}

## Scenario Simulations and Comparisons

Given the context regarding incident selection, IMT organization, and their collective impact on a network and its agents, a series of simulation scenarios were designed for a comprehensive comparative analysis. Each scenario was executed using a network and plans file previously utilized in research conducted by Dr. Macfarlane and research students at Brigham Young University for the Wasatch Front Regional Council (WFRC).

These network and plans files were integrated into our simulation scenarios, alongside the ImtModule described earlier, and other configuration parameters. The config parameters were primarily established by the configuration settings employed by @kaddoura2018 in their MATSim incident simulations. With all parameters set up and organized, a total of 60 simulation scenarios were executed to facilitate a thorough comparative analysis. The subsequent section provides a detailed outline of these scenarios and the methodology employed to compare and contrast their respective outcomes.

### Incident & IMT Scenario

This section outlines the methodology employed for selecting incidents in a set of 20 simulated "days." These simulations are categorized into two distinct groups: one reflecting the current distribution of incidents managed by the Utah Highway Patrol, and another representing a 10-day period with an elevated frequency of incidents, based on the upper range of daily incident data gathered in 2022.

Each of the 20 scenarios was assigned a unique random seed value, ensuring variability in incident selection across simulations. Subsequently, each group of scenarios was further divided into three distinct simulation conditions. The first condition, referred to as "Incidents-Only," includes only the incidents without any IMT intervention. The second condition incorporates the incidents along with the deployment of 20 IMT vehicles, while the third condition includes the incidents and an increased fleet of 30 IMT vehicles. For ease of organization and comparison, each scenario was assigned a unique code, such as "1-10-257." In this coding system, the first digit denotes the scenario type (Incidents-Only, 20 IMTs, or 30 IMTs), the second digit represents the number of incidents included in the simulation, and the third digit corresponds to the seed value used for random incident selection. In total, seven overarching scenario groups were established, as outlined below:


1\. An incidents only scenario with no IMTs and current incident frequency.

2\. An incidents only scenario with no IMTs and increased incident frequency.

3\. Current IMT resources (20 vehicles) with current incident frequency.

4\. Current IMT resources (20 vehicles) with increased incident frequency.

5\. Increased IMT resources (30 vehicles) with the current frequency of incidents.

6\. Increased IMT resources (30 vehicles) with the increased frequency of incidents.

7\. A baseline with no IMTs and no Incidents.

It is important to note, as described in the IMT Vehicle Setup section, that not all IMT vehicles are operational simultaneously. Due to scheduling constraints, the actual number of vehicles on the road at any given time is typically approximately half of the total fleet size.

\<\< Brynn has prepared a table detailing these different scenario types, which we could include here if desired. \>\>

### Comparative Measures


