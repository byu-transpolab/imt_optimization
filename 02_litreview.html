<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Simulating Incident Management Team Response and Performance - 2&nbsp; Literature Review</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03_methods.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02_litreview.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Review</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Simulating Incident Management Team Response and Performance</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_litreview.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Methodology</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_results.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Applications</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Conclusions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#imt-optimization" id="toc-imt-optimization" class="nav-link active" data-scroll-target="#imt-optimization"><span class="header-section-number">2.1</span> IMT Optimization</a></li>
  <li><a href="#incident-modeling" id="toc-incident-modeling" class="nav-link" data-scroll-target="#incident-modeling"><span class="header-section-number">2.2</span> Incident Modeling</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">2.3</span> Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-literature" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Review</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Traffic incident managment in general — and IMT in particular — are not strictly new innovations. The Federal Highway Administration (FHWA) publishes the <em>Traffic Incident Management Handbook</em> (FHWA, 2000) which defines traffic incident management as:</p>
<blockquote class="blockquote">
<p><em>The systematic, planned, and coordinated use of human, institutional, mechanical, and technical resources to reduce the duration and impact of incidents and improve the safety of motorists, crash victims, and incident responders. (p.&nbsp;1-1)</em></p>
</blockquote>
<p>The handbook details the process of how to implement a traffic incident management program as well as improve it. The manual covers various aspects of incident management, including the responsibilities of emergency medical teams, law enforcement, and other responding entities. For this research, we focus on the dedicated traffic incident management teams operated by departments of transportation or similar agencies and not other types of first responders.</p>
<p>The FHWA has established performance measures to develop a framework to quantify improvements to IMT operations and traffic (FHWA, 2000). Two specific measures related to this research are: first, roadway clearance time (RCT) is the time between the first recordable awareness of the incident to the time all lanes open for traffic flow; second, incident clearance time (ICT) is the time between the first recordable awareness of the incident and when the last responder has left the scene.</p>
<p>There is substantial evidence from numerous studies demonstrating the positive influence of TIM programs on traffic conditions, often measured using FHWA or similar performance indicators. One study of note, by <span class="citation" data-cites="schultz2019">(<a href="references.html#ref-schultz2019" role="doc-biblioref">Schultz et al. 2019-04-01, 2019-04</a>)</span>, highlights the substantial benefits of IMT implementations. The study took advantage of the interconnected data used by UDOT and the Utah Highway Patrol to estimate the reduction in traffic resulting from the rapid response of IMT units at crash sites. The findings were compelling: the deployment of IMT units notably decreased excess travel time, alleviated the user costs associated with congestion, and effectively reduced the volume of traffic affected by an incident BY HOW MUCH.</p>
<p><span class="citation" data-cites="kim2012">Kim et al. (<a href="references.html#ref-kim2012" role="doc-biblioref">2012-04-01, 2012-04</a>)</span>, in a study of Maryland’s Coordinated Highways Action Response Team (CHART) operations, devised a model using CHART’s data to compute the costs associated with traffic delay. The team established a marginal cost-to-benefit ratio to discern the ideal fleet size. They first estimated the reduction in traffic delay under various highway response unit strategies. Subsequently, they calculated the costs of fuel consumption, emissions, and delay times and converted these into monetary values. These figures were then multiplied by the delay’s duration to obtain the traffic delay’s marginal costs. The research determined that each additional unit added provided a greater benefit than its associated cost until seven highway response units were deployed. This finding implies that while there is a significant cost-to-benefit ratio with the optimal number of response teams, the benefit diminishes when adding too many teams. Determining the ideal number of teams is a function of budget, network size, and incident frequency.</p>
<p><span class="citation" data-cites="skabardonis1998">Skabardonis (<a href="references.html#ref-skabardonis1998" role="doc-biblioref">1998</a>)</span> concluded in a study of the California Freeway Service Patrol (FSP) IMT service that, on average, total incident response time was 15 minutes longer when California Highway Patrol (CHP) units responded without the support of FSP units. Using a system to assign a cost per traveler per unit of time to vehicles in the observed area, the authors determined FSP units had a cost-to-benefit ratio of 5:1. They also concluded that CHP officers spent less time on incidents (including vehicle breakdowns).&nbsp;</p>
<section id="imt-optimization" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="imt-optimization"><span class="header-section-number">2.1</span> IMT Optimization</h2>
<p>Given the compelling evidence that IMT programs improve traffic conditions and reduce costs for government entities and individuals, it becomes paramount to further research avenues to maximize these benefits. One effective strategy is the strategic placement of IMT units, optimizing their spatial effectiveness to enhance their impact.</p>
<p>Enhancing IMT programs often focus on the precise deployment of individual trucks and the strategic positioning of IMT depots—locations where inactive trucks await dispatch. For scenarios where IMT vehicles are actively on patrol, research often concerns designing an efficient service area or “beat.” Various methodologies have been applied to tackle this allocation challenge. While some studies employ statistical models, incorporating a range of variables to maximize specific performance measures given constraints, others opt for digital modeling as a solution.</p>
<p>For instance, @lou2011 explored strategies aimed at minimizing IMT response time. They developed a mixed-integer nonlinear optimization model and proposed different algorithms to address this problem. The research modeled IMT units as roaming entities within specific freeway sections, aiming to determine the optimal unit locations for minimizing response times. Incident frequencies were generated randomly on the network, given mean and standard deviations of incident occurrence on each link in the network. The study focused on developing and optimizing these algorithms for broad implementation rather than focusing on any particular network or reducing response times in specific areas. They implemented a template “Sioux Falls” network into the model as a practical demonstration. Compared to the existing deployment plan in Sioux Falls, the algorithm-generated plans could potentially reduce total response time by 16.5-20.8%.</p>
<p><span class="citation" data-cites="ozbay2013">Ozbay et al. (<a href="references.html#ref-ozbay2013" role="doc-biblioref">2013-03-01, 2013-03</a>)</span> developed a model that provides information on resource allocation between “depots” or the staging areas of IMT units. A mixed-integer programming model with probabilistic constraints was developed in this research to approach the problem of IMT allocation within the various depots. Given that the probability of incident types on a network is known, IMT units are allocated to the incident scene, considering the future probabilities of incidents on the network. The model’s objective is to minimize incident management costs while maximizing utility. The function is applied to a simplified South Jersey Highway network model to demonstrate the implementation of the model in IMT decision-making. Distribution of demand is based on traffic incident data from South New Jersey. In the test results, a number of depots and trucks assigned to each depot was found given a budget of $500,000 for the whole program. No comparison to existing depot and unit distribution was made; therefore, improvement because of the model was not quantified.</p>
<p>In his work, @ozbay2013 developed a model to inform resource allocation across New Jersey “depots,” the designated staging areas for IMT units. This research employed a mixed-integer programming model with probabilistic constraints to address the challenge of IMT allocation within these depots. With known probabilities of different types of incidents occurring on a network, IMT units were strategically allocated to incident scenes while considering future probabilities of incidents on the same network. The goal of his model was twofold: to minimize incident management costs and to maximize utility. To demonstrate the model’s practical applicability in IMT decision-making, it was implemented on a simplified South Jersey Highway network model. The model’s demand distribution was based on traffic incident data from South New Jersey. The test results established an optimal number of depots and trucks assigned to each depot, given a program budget of $500,000. However, as no comparison was made to the existing depot and unit distribution, the precise improvement attributable to the model was not quantified.</p>
<p>Digital models of IMTs have been developed in the past with various software packages. @pal2002 developed a digital model to replicate IMT impacts on traffic conditions. Overall traffic time in the system was used as the performance indicator of the units. The software program was developed from scratch as existing programs at the time used in mesoscopic traffic simulation could not simulate incident response units. Various configurations of response vehicles were simulated using probability distributions of crash data, vehicle speed, and carrying capacity. Given the study results, suggestions were made regarding fleet size, hours of operation, patrol area design, and improvements regarding the dispatching policy.</p>
<p>These models, whether simulations or optimization problems, have been effective for what they were, but they fail to replicate real-world scenarios in the way that a MATSim simulation can. Simulations like MATSim provide the opportunity to incorporate real-world data and create more realistic networks and model drivers with tools like within-day replanning, which will be discussed in later chapters.</p>
<p>An important consideration in determining the optimal location for the IMT units to be stationed is the metric by which the IMT is judged. The FHWA has established performance measures by which IMTs were evaluated; however, some researchers have felt that other metrics proved helpful in specific scenarios. <span class="citation" data-cites="pal2002">Pal and Sinha (<a href="references.html#ref-pal2002" role="doc-biblioref">2002</a>)</span> use a metric of total traffic time to analyze the model. Total traffic time is a practical approach as traffic slowdowns incur financial costs and other burdens on the individual and community <span class="citation" data-cites="bivina2016">(<a href="references.html#ref-bivina2016" role="doc-biblioref">Bivina, Landge, and Kumar 2016-01-01, 2016-01</a>)</span>. An economic cost-based model is implemented in some research on incident management programs. <span class="citation" data-cites="kim2012">Kim et al. (<a href="references.html#ref-kim2012" role="doc-biblioref">2012-04-01, 2012-04</a>)</span> use assumed values of fuel price and pollution externalities gathered from previous research to assign a monetary value to consequences of traffic delay in time and environmental costs. The study focuses on optimizing IMT programs in general based on specific budgets. Kim and Chang do not implement IMT units directly in their traffic simulation. The total traffic time and financial costs are similar in their fundamental nature in that financial costs are a function of the traffic delay. From another perspective, <span class="citation" data-cites="ozbay2013">Ozbay et al. (<a href="references.html#ref-ozbay2013" role="doc-biblioref">2013-03-01, 2013-03</a>)</span> developed a statistical model where the costs associated with response times are minimized to meet budget constraints. Deciding what factors are most important to measure in the traffic simulation, like costs or response time, will help the decision-making process behind IMT allocation.</p>
</section>
<section id="incident-modeling" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="incident-modeling"><span class="header-section-number">2.2</span> Incident Modeling</h2>
<p>As outlined in the preceding section, previous attempts to understand optimal IMT deployment have been primarily based on ad-hoc models, specially constructed utility functions, or similar stand-alone efforts. Rarely has there been an explicit attempt to model traffic delay associated with incident management, at least partially because research modeling the effects of incidents on region-scale traffic networks is a recent innovation.</p>
<p>Traffic models are based on static assignment, dynamic assignment, or sometimes a combination of both. Static traffic assignment (STA) and dynamic traffic assignment (DTA) make the same behavioral assumption: drivers want to reach their destination in the shortest time possible. A static model achieves optimization by calculating route travel times, finding the shortest path, and adjusting routes toward equilibrium. The issue with static models is that they assume that all vehicles experience the same delay – in particular, traffic flow is anisotropic and obeys causality <span class="citation" data-cites="boyles2018">(<a href="references.html#ref-boyles2018" role="doc-biblioref">Boyles 2018-01-22, 2018-01</a>)</span>.</p>
<p>Dynamic modeling also aims to achieve equilibrium through route choice. Dynamic modeling shows how congestion varies over time, and it bases equilibration on experienced travel times, not instantaneous travel times. According to <span class="citation" data-cites="boyles2018">Boyles (<a href="references.html#ref-boyles2018" role="doc-biblioref">2018-01-22, 2018-01</a>)</span>, “DTA is best applied when the input data are known with high certainty, only a few scenarios are needed, and detailed congestion and queueing information are critical” <span class="citation" data-cites="boyles2018">(<a href="references.html#ref-boyles2018" role="doc-biblioref">Boyles 2018-01-22, 2018-01, 28</a>)</span>. A study on the effects of congestion conducted by @sisiopiku2007 highlighted the applications of simulation-based DTA modeling on incident management. Her study argues that dynamic assignment is preferred over static when considering incident modeling. Sisiopiku describes her methodology as follows:</p>
<blockquote class="blockquote">
<p><em>The overall approach in this study is to use the DTA capabilities to support decision-making for incident management. Unlike static assignment methods, which are based on average daily traffic and fail to capture the dynamic process of an incident, DTA is particularly appropriate for studying short-term planning applications such as evaluating various incident management options (p.&nbsp;111).</em></p>
</blockquote>
<p>In this study, Sisiopiku used a simulation-based DTA model to assess the impacts of designed incident scenarios. She evaluated the effectiveness of candidate incident management plans and the impacts of traffic operations and control strategies for the analysis period.</p>
<p>Sisiopiku initially conducted a base scenario under non-incidental conditions, which served as a benchmark for comparison. The follow-up scenario introduced an incident simulation, with the key caveat that drivers were kept uninformed about the incident. The duration and severity of the incidents were manipulated between different iterations of this second scenario. The third scenario mirrored the second but introduced information provision to the drivers. In this scenario, drivers were empowered to optimize their route through the incident zone and given access to information about pre-planned diversion paths. This information was relayed to the drivers through Variable Message Signs (VMS) strategically positioned upstream of decision points, as detailed in Sisiopiku’s 2007 study.</p>
<p>The scenarios Sisopiku ran in Birmingham and Chicago revealed that travel time savings and traffic delay reduction could be achieved if information was provided to the agents following an incident. The study also shows how a simulation-based DTA model can simulate the impact of incidents on congestion and the impacts of different traffic operation and control strategies. The DTA tool Sisiopiku uses is known as Visual Interactive System for Transport Algorithms or VISTA, a tool commonly used in traffic modeling.</p>
<p>Echoing Sisiopiku’s usage of VISTA, <span class="citation" data-cites="wirtz2005">Wirtz, Schofer, and Schulz (<a href="references.html#ref-wirtz2005" role="doc-biblioref">2005-01-01, 2005-01</a>)</span> also undertook an in-depth analysis of this tool in his 2005 traffic incident simulation study. Wirtz elaborated on the limitations of both VISTA and DTA systems. As part of their route adjustment towards equilibrium, these systems presume all drivers possess flawless travel time information for routing to the user-optimal path. For instance, Sisiopiku, in her 2007 study, presumed a 100% compliance rate for the diversion routes provided to the drivers in her model. The validity of this assumption of perfect travel time information is partially contingent on the communication medium—radio traffic reports, the internet, or VMS. Wirtz’s 2005 study revealed that “less-informed drivers spend more time traveling than necessary, representing a departure from the user-optimal traffic conditions simulated by VISTA.” With the advancements in personal GPS information and its increased accessibility, drivers are more likely to identify an optimal path post-incident. Acknowledging that the assumptions embedded in a model, along with its scope and scale, significantly influence its functionality is critical.</p>
<p>DTA models generally fall into two camps: microscopic and mesoscopic. Microscopic models run on small scales and track the trajectories of individuals. In contrast, mesoscopic models are more aggregated and simplify variations in behavior; they involve elements of both static modeling and dynamic microscopic models <span class="citation" data-cites="boyles2018">(<a href="references.html#ref-boyles2018" role="doc-biblioref">Boyles 2018-01-22, 2018-01</a>)</span>. The level of detail in microscopic models makes them highly realistic but impractical for modeling large regions. A mesoscopic model that shows the paths of individual vehicles but ignores traffic flow issues like turn conflicts and lane changes would work well for modeling traffic flow over a greater area <span class="citation" data-cites="boyles2018">(<a href="references.html#ref-boyles2018" role="doc-biblioref">Boyles 2018-01-22, 2018-01</a>)</span>.</p>
<p>VISTA is an example of a mesoscopic model which showcases DTA’s capability for incident modeling. Microscopic models, like VISSIM, can also be used for incident modeling. Microscopic models can track precise locations of vehicles, driver behavior, and even vehicle characteristics; this makes the models extraordinarily realistic but impractical for modeling large regions <span class="citation" data-cites="boyles2018">(<a href="references.html#ref-boyles2018" role="doc-biblioref">Boyles 2018-01-22, 2018-01</a>)</span>. In Australia, @dia2006 used VISSIM to evaluate incident management impacts on two arterial routes (Coronation Drive and Milton Road) connecting the western suburbs of Brisbane and the Central Business District. Another framework used for incident modeling is the traffic simulator JDSMART. This model was used by <span class="citation" data-cites="vanlint2012">van Lint et al. (<a href="references.html#ref-vanlint2012" role="doc-biblioref">2012-01-01, 2012-01</a>)</span> for incident simulation and to study how roadway policies influence congestion.</p>
<p>MATSim, the Multi-Agent Transport Simulation Toolkit, has recently gained recognition as a helpful software for incident modeling, demonstrating a capacity for producing microscopic and mesoscopic models. Operating as an open-source framework, MATSim is designed to implement large-scale agent-based transport simulations. Using a mesoscopic queue-based strategy, agents representing individuals seek the shortest routes connecting their activities.</p>
<p>In his 2016 chapter of the MATSim manual, <span class="citation" data-cites="dobler2016">Dobler and Nagel (<a href="references.html#ref-dobler2016" role="doc-biblioref">2016</a>)</span> emphasized the necessity and application of a within-day replanning tool within the MATSim context. He elaborated that while MATSim’s iterative modeling approach fares well under ideal conditions and in achieving user equilibrium, it falls short when dealing with unexpected occurrences. This deficiency manifests as illogical behavior, such as pre-emptive route changes before the incident’s actual occurrence. For example, Figure 1 illustrates a MATSim routing problem featuring within-day replanning. It depicts an agent (a simulated individual) navigating from the red dot to the green dot. A crash ensues along the agent’s assigned route at 14:02. Due to the iterative approach; however, the agent switches to a different route at 14:00, two minutes before the crash. This inconsistency exposes the limitations of an iterative approach in modeling unanticipated behavior, underscoring the need for a within-day replanning method, which utilizes a single iteration for replanning rather than multiple.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/fig1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Within-day replanning approach for a MATSim routing problem.</figcaption>
</figure>
</div>
<p>While iterative systems leverage best-response modules, within-day systems necessitate using a best-guess module. This approach means that travel times can be optimized to a stable state with an iterative approach, but this is not the case with a within-day approach. An inherent attribute of within-day replanning is that it doesn’t converge to a user equilibrium, unlike an iterative process. Decisions, appearing optimal in the heat of the moment, often reveal themselves as suboptimal upon retrospective evaluation. Given the limited information available to the agents in a within-day system, they may not necessarily choose the path with the shortest travel time post-incident, as discussed by Dobler in 2016.</p>
<p>Replanning contains two categories: replanning an element of the activity and executing the replanned elements. Elements include the start and end times of the trip, the trip’s location, route, mode choice, or the dropping of a trip entirely. The system can execute plans for in-the-moment events or those performed in the future. In a presently performed procedure, we cannot conduct all replanning actions (e.g., we can no longer alter the start time of an activity or the transport mode of a trip currently being performed) <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016</a>)</span>. Figure 2: Iterative and within-day replanning MATSim loop. illustrates where within-day replanning fits within a MATSim loop.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/fig2.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Iterative and within-day replanning MATSim loop.</figcaption>
</figure>
</div>
<p>An alternative to iterative or within-day replanning only approaches is to combine them. For example, we cannot plan situations like parking or car-sharing thoroughly, requiring iterative and within-day replanning methods. An agent can arrange a parking activity but cannot predict which parking spots will be available when they arrive. Thus, we use within-day replanning when the agent starts their parking choice.</p>
<p>In general, within-day or en-route replanning means that travelers replan during the day or on their route, which means that the simulation needs to influence the agent while the network is running. <span class="citation" data-cites="dobler2016explains">(<a href="references.html#ref-dobler2016explains" role="doc-biblioref"><strong>dobler2016explains?</strong></a>)</span> that we influence agents’ decisions through loops or by having users’ routes dependent on the next link that they choose. Because going through all links and nodes at every step would be computationally challenging, we may set certain links to be non- active and removed from the computation <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016</a>)</span>. The two implementation methods Dobler described are plan-based implementation and replacing the agent.</p>
<p>In a plan-based implementation, a loop is used where each agent has the chance to deliberate in every time step. The agent can decide that they have nothing to deliberate and return immediately. Because the number of links is typically much smaller than the number of agents in a scenario, massive optimization is necessary to make the loop computationally efficient. For this reason, we could ask each agent to choose a link only when they need to make a decision.</p>
<p>Such event-driven planning requires the agents to be re-programmed to have enough capabilities to be oriented about themselves (i.e., be able to compute plausible routes). Agents will only need to perform such computation when replanning is triggered by an event like an emergency warning or unexpected congestion; otherwise, they will follow their usual daily plans.</p>
<p>Re-programing agents and implementing within-day replanning, as shown in Figure 2: Iterative and within-day replanning MATSim loop., requires the implantation of a <em>MobsimEngine</em>, which can be plugged into the mobility simulator seen in the execution phase of Figure 2: Iterative and within-day replanning MATSim loop <span class="citation" data-cites="axhausen2016">(<a href="references.html#ref-axhausen2016" role="doc-biblioref">Axhausen, Horni, and Nagel 2016-08-10, 2016-08</a>)</span>. <span class="citation" data-cites="dobler2016">Dobler and Nagel (<a href="references.html#ref-dobler2016" role="doc-biblioref">2016</a>)</span> describes it this way, “in every simulated time step, the QSim iterates over all registered <em>MobsimEngines</em> and allows them to simulate the current time step. Besides simulation of the traffic flows, those engines can also let agents start or end activities” <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016, 193</a>)</span>. The engines contain within-day replanning logic called <em>WithinDayEngine</em>, which helps track agents and adapt their plans <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016</a>)</span>. Not all agents need to compute plausible routes at every turn, so an <em>AgentSelector</em> is used to select the agents to be replanned. <em>AgentFilters</em> assist them in narrowing the search population <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016</a>)</span>. Lastly, <em>TravelTimeCollectors</em> are part of the <em>WithinDayEngine</em> and provide actual link travel times to the replanners by collecting and averaging travel times of agents that have recently passed a link during a given time <span class="citation" data-cites="dobler2016">(<a href="references.html#ref-dobler2016" role="doc-biblioref">Dobler and Nagel 2016</a>)</span>. The elements described above make up the plan-based system.</p>
<p>A significant incident modeling, plan-based system study used MATSim to simulate traffic incidents <span class="citation" data-cites="kaddoura2018">(<a href="references.html#ref-kaddoura2018" role="doc-biblioref">Kaddoura and Nagel 2018-01-01, 2018-01</a>)</span>. Their research explains that MATSim models transport users as individual agents. MATSim is iterative and allows users to adjust travel plans during a single iteration, from iteration to iteration, or both <span class="citation" data-cites="kaddoura2018">(<a href="references.html#ref-kaddoura2018" role="doc-biblioref">Kaddoura and Nagel 2018-01-01, 2018-01</a>)</span>. Kaddoura and Nagel accessed their incident data via the HERE application programming interface for traffic incidents. This incident data included Traffic Message Channel (TMC) information indicating an incident’s cause and severity. With such robust data, Kaddoura and Nagel could categorize incidents as long or short-term and model each accordingly in MATSim. Long-term effects include multiple-day lane closures, whereas short-term incidents affect transport supply for less than a day. Their simulation was based on an inner-city network in Berlin, Germany. Figure 3: Traffic incidents mapped on the Berlin network illustrates the type of incidents modeled and their severity. In this example, a crash on the southern inner-city motorway ring road led to a full road closure, and several construction sites caused partial capacity reductions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/fig3.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Traffic incidents mapped on the Berlin network.</figcaption>
</figure>
</div>
<p><span class="citation" data-cites="kaddoura2018">Kaddoura and Nagel (<a href="references.html#ref-kaddoura2018" role="doc-biblioref">2018-01-01, 2018-01</a>)</span> found that long-term traffic incidents increase traffic congestion and the average car travel time by 313 sec (+18%) per trip. Short-term traffic incidents increase the average travel time per car trip by another 136 sec (+8%). Additionally, they found that for 44% of all car trips, the agent’s transport route contained at least one road segment for which the capacity or speed limit was reduced because of an incident. Their study concluded that networks in which transport users had high levels of knowledge about the incidents and resulting traffic congestion still experienced an increase in travel time caused by long and short-term incidents. Finally, Kaddoura and Nagel asserted that “accounting for traffic incidents makes the model more realistic, allowing for an improved policy investigation” <span class="citation" data-cites="kaddoura2018">(<a href="references.html#ref-kaddoura2018" role="doc-biblioref">Kaddoura and Nagel 2018-01-01, 2018-01, 885</a>)</span>. The modeling performed by Kaddoura and Nagel is just one example of research on MATSim’s capacity for incident-based simulations.</p>
<p>A MATSim model developed by <span class="citation" data-cites="li2020">Li and Ferguson (<a href="references.html#ref-li2020" role="doc-biblioref">2020-01-01, 2020-01</a>)</span> included a range of rescheduling options, such as departure time, mode choice, and trip cancellation. Their simulation found that if travelers received notice of an incident, they would either depart early from their place of origin or switch to public transport <span class="citation" data-cites="li2020">(<a href="references.html#ref-li2020" role="doc-biblioref">Li and Ferguson 2020-01-01, 2020-01</a>)</span>. The process proposed by Li and Ferguson is beneficial because it allows agents to reassess their mode choice or route assignment based on the notice of a reported incident. Li and Ferguson show that users care about total travel time and travel time variability (risk tolerance to a certain degree). The receiving of notifications about incidents by agents impacted both factors. They concluded that “the provision of real-time traffic information is a useful approach to mitigating the side-effects of incidents through helping transport users efficiently adapt their day plans” <span class="citation" data-cites="li2020">(<a href="references.html#ref-li2020" role="doc-biblioref">Li and Ferguson 2020-01-01, 2020-01, 96</a>)</span>.</p>
<p>Additionally, they found that “most of the travelers notified of being affected by incidents are simulated to depart early or switch to public transport, which effectively reduces the average travel time delay caused by disruptions” <span class="citation" data-cites="li2020">(<a href="references.html#ref-li2020" role="doc-biblioref">Li and Ferguson 2020-01-01, 2020-01, 96</a>)</span>. Their findings validate the conclusions of @sisiopiku2007 that making incident information available to agents leads to decreases in travel time and congestion. Like the studies already mentioned, there have been various modifications to and research on MATSim and its capacity.</p>
<p>In Thailand’s capital, Bangkok, a study conducted by <span class="citation" data-cites="peungnumsai2019">Peungnumsai et al. (<a href="references.html#ref-peungnumsai2019" role="doc-biblioref">2019</a>)</span> demonstrated the potency of the MATSim framework in portraying the impact of rush hour congestion on select traffic links. Peungnumsai ran various simulation iterations, loading the selected links with a different number of agents: 10, 100, and 500. The data collected and the subsequent analysis substantiated MATSim’s capability to demonstrate the congestion-induced variations in travel time. Furthermore, it was observed that as the number of agents in the simulation increased, there was a proportional surge in computing time, physical memory usage, and the size of the output file. Despite the scale of these simulations being relatively small, MATSim has the capacity to simulate up to 10-100 million agents, encompassing various modes of transportation like bicycles, motorbikes, cars, buses, and taxis <span class="citation" data-cites="peungnumsai2019">(<a href="references.html#ref-peungnumsai2019" role="doc-biblioref">Peungnumsai et al. 2019</a>)</span>.</p>
<p>In a contrasting study conducted in Copenhagen, Denmark, <span class="citation" data-cites="paulsen2018">Paulsen, Rasmussen, and Nielsen (<a href="references.html#ref-paulsen2018" role="doc-biblioref">2018</a>)</span> utilized MATSim to contrast the reliability of automobile and railway travel times. His methodology involved using an extension of MATSim centered around an event-based public transport router, which facilitates optimal route selection for public transport users by comparing the effectiveness of routes over several iterations. Paulsen’s simulation of travel times for both cars and trains yielded an interesting finding: passenger delays were significantly influenced by the adaptiveness of their chosen routes. However, he noted that passenger travel times tended to be more unpredictable than trains, and this unpredictability escalated with the degree of route adaptiveness. He concluded that the adaptiveness of route selection contributed to significant travel time fluctuations, a conclusion that aligns with the findings of <span class="citation" data-cites="li2020">Li and Ferguson (<a href="references.html#ref-li2020" role="doc-biblioref">2020-01-01, 2020-01</a>)</span>.</p>
<p>In essence, the studies encapsulated in Section 2.3 validate the effectiveness of the open-source software MATSim, in simulating traffic incidents, congestion, and travel times. This evidence accentuates how the proper application of MATSim or similar Dynamic Traffic Assignment (DTA) models can account for traffic incidents, thereby enhancing the realism of the models. This type of model, in turn, can facilitate more effective policy investigation, as noted by <span class="citation" data-cites="kaddoura2018">Kaddoura and Nagel (<a href="references.html#ref-kaddoura2018" role="doc-biblioref">2018-01-01, 2018-01</a>)</span>.</p>
</section>
<section id="summary" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="summary"><span class="header-section-number">2.3</span> Summary</h2>
<p>As explained in this section there has been extensive research into IMT effectiveness and its ability to restore traffic flow following long- and short-term disturbances. Additionally, several studies have examined how to effectively model traffic incidents and show their impact on travel time, congestion, and mode choice. However, in these vast arrays of findings, there is a gap in research on modeling IMT effectiveness and incident impact on a loaded with realistic agents. As a result, it is difficult for researchers to understand how changes to incident generation or to IMT availability may impact traffic conditions, for good or for bad. In this research, we seek to bring these two strands together, attempting to model incident response in a microsimulation framework to bring realism and detail to the IMT deployment question.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-axhausen2016" class="csl-entry" role="listitem">
Axhausen, Kay W., Andreas Horni, and Kai Nagel. 2016-08-10, 2016-08. <em>The Multi-Agent Transport Simulation <span>MATSim</span></em>. <span>Ubiquity Press</span>.
</div>
<div id="ref-bivina2016" class="csl-entry" role="listitem">
Bivina, G. R., Vishrut Landge, and V. S. Sanjay Kumar. 2016-01-01, 2016-01. <span>“Socio Economic Valuation of Traffic Delays.”</span> <em>Transportation Research Procedia</em>, International conference on transportation planning and implementation methodologies for developing countries (12th <span>TPMDC</span>) selected proceedings, <span>IIT</span> bombay, mumbai, india, 10-12 december 2014, 17 (2016-01-01, 2016-01): 513–20. <a href="https://doi.org/10.1016/j.trpro.2016.11.104">https://doi.org/10.1016/j.trpro.2016.11.104</a>.
</div>
<div id="ref-boyles2018" class="csl-entry" role="listitem">
Boyles, Stephen. 2018-01-22, 2018-01. <span>“Introduction to Dynamic Traffic Assignment,”</span> 2018-01-22, 2018-01.
</div>
<div id="ref-dobler2016" class="csl-entry" role="listitem">
Dobler, Christoph, and Kai Nagel. 2016. <span>“Within-Day Replanning.”</span> In. <span>Ubiquity Press</span>.
</div>
<div id="ref-kaddoura2018" class="csl-entry" role="listitem">
Kaddoura, Ihab, and Kai Nagel. 2018-01-01, 2018-01. <span>“Using Real-World Traffic Incident Data in Transport Modeling.”</span> <em>Procedia Computer Science</em>, The 9th international conference on ambient systems, networks and technologies (<span>ANT</span> 2018) / the 8th international conference on sustainable energy information technology (<span>SEIT-2018</span>) / affiliated workshops, 130 (2018-01-01, 2018-01): 880–85. <a href="https://doi.org/10.1016/j.procs.2018.04.084">https://doi.org/10.1016/j.procs.2018.04.084</a>.
</div>
<div id="ref-kim2012" class="csl-entry" role="listitem">
Kim, Woon, Mark Franz, Gang-Len Chang, and Md.). Dept. of Civil and Environmental Engineering University of Maryland (College Park. 2012-04-01, 2012-04. <span>“Enhancement of Freeway Incident Traffic Management and Resulting Benefits.”</span>
</div>
<div id="ref-li2020" class="csl-entry" role="listitem">
Li, Jingsi, and Neil Ferguson. 2020-01-01, 2020-01. <span>“A Multi-Dimensional Rescheduling Model in Disrupted Transport Network Using Rule-Based Decision Making.”</span> <em>Procedia Computer Science</em>, The 11th international conference on ambient systems, networks and technologies (<span>ANT</span>) / the 3rd international conference on emerging data and industry 4.0 (<span>EDI40</span>) / affiliated workshops, 170 (2020-01-01, 2020-01): 90–97. <a href="https://doi.org/10.1016/j.procs.2020.03.012">https://doi.org/10.1016/j.procs.2020.03.012</a>.
</div>
<div id="ref-ozbay2013" class="csl-entry" role="listitem">
Ozbay, Kaan, Cem Iyigun, Melike Baykal-Gursoy, and Weihua Xiao. 2013-03-01, 2013-03. <span>“Probabilistic Programming Models for Traffic Incident Management Operations Planning.”</span> <em>Annals of Operations Research</em> 203 (1): 389–406. <a href="https://doi.org/10.1007/s10479-012-1174-6">https://doi.org/10.1007/s10479-012-1174-6</a>.
</div>
<div id="ref-pal2002" class="csl-entry" role="listitem">
Pal, R., and K. C. Sinha. 2002. <span>“<span>SIMULATION MODEL FOR EVALUATING AND IMPROVING EFFECTIVENESS OF FREEWAY SERVICE PATROL PROGRAMS</span>.”</span> <em>Journal of Transportation Engineering</em> 128 (4).
</div>
<div id="ref-paulsen2018" class="csl-entry" role="listitem">
Paulsen, Mads, Thomas Kjær Rasmussen, and Otto Anker Nielsen. 2018. <span>“Modelling Railway-Induced Passenger Delays in Multi-Modal Public Transport Networks: <span>An</span> Agent-Based Copenhagen Case Study Using Empirical Train Delay Data: 14th Conference on Advanced Systems in Public Transport and <span>TransitData</span> 2018.”</span> In.
</div>
<div id="ref-peungnumsai2019" class="csl-entry" role="listitem">
Peungnumsai, Apantri, Hiroyuki Miyazaki, Apichon Witayangkurn, and Masanobu Kii. 2019. <span>“A Review of <span>MATSim</span>: <span>A</span> Pilot Study of Chatuchak, Bangkok.”</span>
</div>
<div id="ref-schultz2019" class="csl-entry" role="listitem">
Schultz, Grant G., Mitsuru Saito, Dennis L. Eggett, Logan S Bennett, Mitchell G Hadfield, Brigham Young University. Dept. of Civil, and Environmental Engineering. 2019-04-01, 2019-04. <span>“Analysis of Performance Measures of Traffic Incident Management in Utah.”</span>
</div>
<div id="ref-skabardonis1998" class="csl-entry" role="listitem">
Skabardonis, Alexander. 1998. <span>“Evaluation of the Freeway Service Patrol (<span>FSP</span>) in Los Angeles.”</span> <em>PATH Research Report</em>.
</div>
<div id="ref-vanlint2012" class="csl-entry" role="listitem">
van Lint, Hans, Onno Miete, Henk Taale, and Serge Hoogendoorn. 2012-01-01, 2012-01. <span>“Systematic Framework for Assessing Traffic Measures and Policies on Reliability of Traffic Operations and Travel Time.”</span> <em>Transportation Research Record</em> 2302 (1): 92–101. <a href="https://doi.org/10.3141/2302-10">https://doi.org/10.3141/2302-10</a>.
</div>
<div id="ref-wirtz2005" class="csl-entry" role="listitem">
Wirtz, John J., Joseph L. Schofer, and David F. Schulz. 2005-01-01, 2005-01. <span>“Using Simulation to Test Traffic Incident Management Strategies: <span>The</span> Benefits of Preplanning.”</span> <em>Transportation Research Record</em> 1923 (1): 82–90. <a href="https://doi.org/10.1177/0361198105192300109">https://doi.org/10.1177/0361198105192300109</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03_methods.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Methodology</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>